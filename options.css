/* =====================================================
 * SummarizerX Options — Flat UI Theme (Vue-ready)
 * - Keep existing class names and DOM structure
 * - Remove glassmorphism, blurs, heavy shadows, and gradients
 * - Use solid surfaces, crisp borders, clear focus rings
 * - Maintain responsive behavior and no unintended line breaks
 * ===================================================== */

* { box-sizing: border-box; }
html, body { height: 100%; }

:root{
  /* Base palette — light */
  --bg: #f7f8fb;
  --surface: #ffffff;
  --surface-2: #f2f4f8;
  --border: #e5e7eb;
  --text: #111827;
  --muted: #606b85;

  --primary: #2563eb;     /* brand blue */
  --primary-600: #1e40af; /* darker */
  --accent: #10b981;      /* success */
  --danger: #dc2626;      /* error */
  --link: #2563eb;

  --radius: 12px;
  --ring: 0 0 0 3px rgba(37,99,235,.20);

  --dock-h: 76px; /* save dock height */
}

body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "PingFang SC", "Noto Sans SC", sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* 内容避免被底栏遮挡 */
.main-with-dock{ padding-bottom: var(--dock-h); }
.wrap{ max-width: 980px; margin: 0 auto; padding: 0 16px; }

/* Toast */
#sx-toast-root{ position: fixed; right: 16px; bottom: 16px; z-index: 2147483000; display:flex; flex-direction: column; gap:8px; }
.sx-toast{
  min-width: 200px; max-width: 360px;
  padding: 10px 12px; border-radius: var(--radius);
  background: #0f172a; color:#f8fafc; border:1px solid rgba(255,255,255,0.08);
  font-size: 13px; line-height: 1.5;
}
.sx-toast.success{ background:#059669; }
.sx-toast.error{ background:#b91c1c; }
[data-theme="light"] .sx-toast{ background:#0f172a; color:#f8fafc; }

/* =========================
 * Page header (flat card)
 * ========================= */
.hero{
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px 0 16px;
  margin: 12px 0 16px;
}

.hero-header{
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 20px;
}

.hero-title{
  margin:0;
  font-size:22px;
  font-weight:800;
  letter-spacing:.3px;
  display:flex; align-items:center; gap:10px;
  flex: 1;
}

.hero-sub{ margin:6px 0 0; color:#6b7280; font-size:13px; }
.badge{
  font-size:12px; color:#065f46; background:#d1fae5; border:1px solid #a7f3d0;
  padding:3px 8px; border-radius:999px;
}

/* Language switcher — segmented */
.language-switcher{ display:flex; gap:4px; background: var(--surface-2); border:1px solid var(--border); border-radius: 8px; padding: 2px; }
.lang-btn{
  background: transparent; border: none; padding: 6px 12px; border-radius: 6px;
  font-size: 12px; font-weight: 600; color: var(--muted); cursor: pointer; transition: background .15s, color .15s;
  white-space: nowrap;
}
.lang-btn:hover{ background:#eaeef6; color:#0f172a; }
.lang-btn.active{ background:#1f2937; color:#fff; }

/* =========================
 * Section cards (flat)
 * ========================= */
.section.card{
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  margin: 16px 0;
}
.section-title{ margin:0 0 12px; font-size:16px; font-weight:700; color: var(--text); display:flex; align-items:center; gap:8px; }
.section-title .dot{ width:8px; height:8px; border-radius:50%; background: var(--primary); display:inline-block; }
.section.card.note .section-title .dot{ background: var(--accent); }

/* =========================
 * Form layout
 * ========================= */
.grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
@media (max-width: 800px){ .grid{ grid-template-columns:1fr; } }

.field{ display:block; }
.label{ display:flex; align-items:center; gap:6px; font-size:12px; color:#475467; font-weight:600; margin:0 0 6px; }
.label .icon{ color:#2563eb; flex-shrink:0; }

/* Inputs */
.ctrl{
  width:100%; padding:10px 12px; border-radius: 10px; font-size:14px; outline:none; transition: box-shadow .15s, border-color .15s, background .15s;
  background:#fff; border:1px solid #d1d5db; color: var(--text);
}
.ctrl::placeholder{ color:#9aa3b2; }
.ctrl:hover{ border-color:#cbd5e1; }
.ctrl:focus{ border-color:#93c5fd; box-shadow: var(--ring); }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; line-height:1.6; min-height:160px; }

/* Password eye */
.eye-wrap{ position: relative; }
.eye-wrap input.ctrl{ padding-right: 44px; }
.eye-btn{ position:absolute; right:10px; top:50%; transform: translateY(-50%); width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; border:0; background:transparent; color:#6b7280; cursor:pointer; border-radius:6px; }
.eye-btn:hover{ background:#edf2f7; color:#1e40af; }
.eye-btn:focus-visible{ outline:2px solid var(--primary); }

/* Disabled */
.ctrl[disabled]{ background:#f3f4f6; color:#9aa3b2; cursor:not-allowed; }
.eye-btn:disabled{ opacity:.4; cursor:not-allowed; }

/* =========================
 * Buttons (flat)
 * ========================= */
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.btn{
  padding:10px 14px; border-radius: 10px; cursor:pointer; font-weight:700; border:1px solid #d1d5db; background:#fff; color:#111827; transition: background .15s, border-color .15s, transform .05s;
  white-space: nowrap; min-width:0; flex-shrink:1; max-width:160px; overflow:hidden; text-overflow:ellipsis;
}
.btn:hover{ background:#f3f4f6; border-color:#cbd5e1; }
.btn:active{ transform: translateY(1px); }
.btn.primary{ background: var(--primary); border-color: var(--primary); color:#fff; }
.btn.primary:hover{ background:#1d4ed8; border-color:#1d4ed8; }

/* Helper/notes */
.help{ font-size:13px; color:#475467; line-height:1.7; background: var(--surface-2); border:1px dashed var(--border); padding:10px 12px; border-radius:10px; }
.meta{ margin-top:8px; font-size:12px; color:#475467; border:1px dashed var(--border); background: #f7f8fb; padding:8px; border-radius:8px; }
.hint{ font-size:12px; color:#6b7280; }

/* Shortcuts */
.shortcut .shortcut-desc{ font-size: 13px; color:#555; margin: 6px 0 12px; }
html[data-theme="dark"] .shortcut .shortcut-desc{ color:#b6c0cf; }
.shortcut code{ background:#111827; color:#e5e7eb; padding:2px 6px; border-radius:6px; }

/* =========================
 * Save dock (flat)
 * ========================= */
.save-dock{
  position: fixed; left: 0; right: 0; bottom: 0; min-height: var(--dock-h);
  padding: 10px 0 12px; background: var(--surface); border-top:1px solid var(--border);
  display:flex; align-items:center; z-index:50;
}
.dock-inner{ width:100%; display:flex; align-items:center; justify-content:space-between; gap:12px; }
.dock-left{ display:flex; flex-direction:column; gap:6px; min-width: 380px; max-width: 520px; flex-shrink:1; }
.dock-right{ display:flex; gap:10px; flex-wrap:nowrap; align-items:center; min-width:0; flex:1; justify-content:flex-end; }

.status-line{ display:flex; align-items:center; gap:8px; }
.status-dot{ width:8px; height:8px; border-radius:50%; background:#cbd5e1; }
.status-text{ font-size:12px; color:#64748b; }

.save-dock .meta{
  margin:0; max-width:100%; white-space:normal; word-break: break-word; overflow:auto; text-overflow:unset; max-height:9.1em; font-size:11px; line-height:1.3; padding:6px 8px;
}

/* Field sizing helpers */
.field-full { margin-bottom: 16px; }
select.ctrl.short{ max-width: 220px; height: 34px; line-height: 34px; padding: 0 28px 0 10px; }
#aiProvider.ctrl { max-width: 400px; display: inline-block; }
#dock-spacer { height: 12px; }

/* Purchase inline */
.buy-help-inline{ display:inline-block; margin-left:8px; font-size:12px; color:#6b7280; vertical-align:middle; white-space:nowrap; }
.buy-help-inline a{ color: var(--link); text-decoration: underline; text-underline-offset: 2px; margin: 0 2px; }
.buy-help-inline a:hover{ filter: brightness(0.95); }
@media (max-width: 800px){ .buy-help-inline{ display:block; margin:6px 0 0; white-space: normal; } }

/* Utility */
.hidden { display: none !important; }

/* =========================
 * Theme toggle (flat)
 * ========================= */
.theme-toggle{ display:flex; align-items:center; gap:10px; min-height:40px; flex-shrink:0; }
.theme-toggle .label{ display:flex; align-items:center; justify-content:center; height:42px; line-height:42px; font-size:12px; font-weight:700; color:#475569; margin-right:2px; }
.theme-toggle .seg{ display:flex; align-items:center; gap:6px; background:#f4f6fb; border:1px solid #d9e4f5; border-radius: 999px; padding:4px; }
.theme-toggle .seg button, .theme-btn{ width:34px; height:34px; display:grid; place-items:center; border:none; border-radius:999px; cursor:pointer; background:transparent; color:#5b6b7f; padding:0; }
.theme-toggle .seg button.active, .theme-toggle .seg button[aria-selected="true"], .theme-btn.active, .theme-btn[aria-selected="true"]{ background: #1f2937; color:#fff; }
.theme-toggle .seg button svg, .theme-btn svg{ width:18px; height:18px; pointer-events:none; stroke: currentColor; fill:none; opacity:.95; }

/* =========================
 * Responsive tweaks
 * ========================= */
@media (max-width: 720px){
  .dock-inner{ flex-direction: column; align-items: stretch; }
  .dock-left{ min-width:auto; max-width:none; }
  .dock-right{ justify-content:flex-end; gap:8px; flex-wrap: wrap; }
  .btn{ padding: 8px 12px; font-size:12px; max-width: 120px; }
  .save-dock .meta{ white-space:normal; font-size:10px; padding:4px 6px; }
}
.save-dock{ padding: 12px 0; }
.main-with-dock{ padding-bottom: 120px; }
.save-dock .status-line{ margin-top: 2px; }

/* =========================
 * Dark theme — explicit (html[data-theme="dark"]) flat
 * ========================= */
html[data-theme="dark"]{
  --bg:#0b1118;
  --surface:#141b29;
  --surface-2:#0f1625;
  --border:#223047;
  --text:#e6e9ef;
  --muted:#a4acb9;
  --primary:#7b8fa6;
  --primary-600:#59708e;
  --accent:#82a390;
  --link:#9fb8d8;
}

html[data-theme="dark"] .hero,
html[data-theme="dark"] .section.card,
html[data-theme="dark"] .save-dock{
  background: var(--surface);
  border-color: var(--border);
}
html[data-theme="dark"] .help{ color:#cfdae8; background: var(--surface-2); border-color: var(--border); }
html[data-theme="dark"] .meta{ color:#b9c3d3; background: #101826; border-color: var(--border); }
html[data-theme="dark"] .hint{ color:#9fb0c6; }
html[data-theme="dark"] .section-title .dot{ background: var(--primary-600); }
html[data-theme="dark"] .section.card.note .section-title .dot{ background: var(--accent); }
html[data-theme="dark"] .ctrl{ background:#0f172a; border-color:#2a3a57; color: var(--text); }
html[data-theme="dark"] .ctrl:hover{ border-color:#3a4f72; }
html[data-theme="dark"] .ctrl:focus{ border-color:#4d6b99; box-shadow: 0 0 0 3px rgba(159,184,216,0.22); }
html[data-theme="dark"] .theme-toggle .seg{ background:#1a2333; border-color:#2a3a57; }
html[data-theme="dark"] .theme-toggle .seg button{ color:#d7dde7; }
html[data-theme="dark"] .theme-toggle .seg button.active,
html[data-theme="dark"] .theme-toggle .seg button[aria-selected="true"],
html[data-theme="dark"] .theme-btn.active,
html[data-theme="dark"] .theme-btn[aria-selected="true"]{ background: var(--primary-600); color:#fff; }
html[data-theme="dark"] .language-switcher{ background:#1a2333; border-color:#2a3a57; }
html[data-theme="dark"] .language-switcher .lang-btn{ color:#e6e9ef; }
html[data-theme="dark"] .language-switcher .lang-btn:hover{ background:#24324a; color:#fff; }
html[data-theme="dark"] .language-switcher .lang-btn.active{ background: var(--primary-600); color:#fff; }

/* --- Dark mode refinements: shortcuts & buttons --- */
html[data-theme="dark"] .shortcut{
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px;
}

/* Ensure buttons in save dock and shortcuts also follow dark tone */
html[data-theme="dark"] .btn{
  background:#0e1726;            /* deeper, less bright */
  border-color:#27344b;
  color:#dbe3ee;                 /* lighten label for contrast */
}
html[data-theme="dark"] .btn:hover{ background:#142037; border-color:#344766; }
html[data-theme="dark"] .btn:active{ background:#101c30; }

html[data-theme="dark"] .save-dock .btn,
html[data-theme="dark"] .shortcut .btn{
  background:#0e1726;
  border-color:#27344b;
  color:#dbe3ee;
}
html[data-theme="dark"] .save-dock .btn:hover,
html[data-theme="dark"] .shortcut .btn:hover{ background:#142037; border-color:#344766; }

/* Primary buttons in dark mode */
html[data-theme="dark"] .btn.primary{
  background: var(--primary-600); /* softer than pure brand in dark */
  border-color: var(--primary-600);
  color:#fff;
}
html[data-theme="dark"] .btn.primary:hover{ background:#4a5f7a; border-color:#4a5f7a; }

/* =========================
 * Light theme — explicit (html[data-theme="light"]) flat
 * ========================= */
html[data-theme="light"]{
  --bg:#f7f8fb;
  --surface:#ffffff;
  --surface-2:#f2f4f8;
  --border:#e5e7eb;
  --text:#111827;
  --muted:#475569;
  --primary:#2563eb;
  --primary-600:#1e40af;
  --accent:#10b981;
  --link:#2563eb;
}
html[data-theme="light"] .hero,
html[data-theme="light"] .section.card,
html[data-theme="light"] .save-dock{ background: var(--surface); border-color: var(--border); }
html[data-theme="light"] .ctrl{ background:#fff; border-color:#d1d5db; color:#111827; }
html[data-theme="light"] .ctrl:hover{ border-color:#cbd5e1; }
html[data-theme="light"] .ctrl:focus{ border-color:#93c5fd; box-shadow: var(--ring); }
html[data-theme="light"] .language-switcher{ background: var(--surface-2); border-color: var(--border); }
html[data-theme="light"] .language-switcher .lang-btn{ color:#334155; }
html[data-theme="light"] .language-switcher .lang-btn:hover{ background:#eaeef6; color:#0f172a; }
html[data-theme="light"] .language-switcher .lang-btn.active{ background:#1f2937; color:#fff; }